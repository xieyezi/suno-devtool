{
  "version": 3,
  "sources": ["../../../../../../../front_end/panels/network/components/RequestHeaderSection.ts"],
  "sourcesContent": ["// Copyright 2022 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as ComponentHelpers from '../../../ui/components/helpers/helpers.js';\nimport * as LitHtml from '../../../ui/lit-html/lit-html.js';\n\nimport type * as SDK from '../../../core/sdk/sdk.js';\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport * as NetworkForward from '../forward/forward.js';\nimport * as IconButton from '../../../ui/components/icon_button/icon_button.js';\nimport * as Platform from '../../../core/platform/platform.js';\nimport {type HeaderDescriptor, HeaderSectionRow, type HeaderSectionRowData} from './HeaderSectionRow.js';\n\nimport requestHeaderSectionStyles from './RequestHeaderSection.css.js';\n\nconst {render, html} = LitHtml;\n\nconst UIStrings = {\n  /**\n   *@description Text that is usually a hyperlink to more documentation\n   */\n  learnMore: 'Learn more',\n  /**\n   *@description Message to explain lack of raw headers for a particular network request\n   */\n  provisionalHeadersAreShownDisableCache: 'Provisional headers are shown. Disable cache to see full headers.',\n  /**\n   *@description Tooltip to explain lack of raw headers for a particular network request\n   */\n  onlyProvisionalHeadersAre:\n      'Only provisional headers are available because this request was not sent over the network and instead was served from a local cache, which doesn\u2019t store the original request headers. Disable cache to see full request headers.',\n  /**\n   *@description Message to explain lack of raw headers for a particular network request\n   */\n  provisionalHeadersAreShown: 'Provisional headers are shown.',\n};\n\nconst str_ = i18n.i18n.registerUIStrings('panels/network/components/RequestHeaderSection.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport interface RequestHeaderSectionData {\n  request: SDK.NetworkRequest.NetworkRequest;\n  toReveal?: {section: NetworkForward.UIRequestLocation.UIHeaderSection, header?: string};\n}\n\nexport class RequestHeaderSection extends HTMLElement {\n  static readonly litTagName = LitHtml.literal`devtools-request-header-section`;\n  readonly #shadow = this.attachShadow({mode: 'open'});\n  #request?: Readonly<SDK.NetworkRequest.NetworkRequest>;\n  #headers: HeaderDescriptor[] = [];\n\n  connectedCallback(): void {\n    this.#shadow.adoptedStyleSheets = [requestHeaderSectionStyles];\n  }\n\n  set data(data: RequestHeaderSectionData) {\n    this.#request = data.request;\n\n    this.#headers = this.#request.requestHeaders().map(header => ({\n                                                         name: Platform.StringUtilities.toLowerCaseString(header.name),\n                                                         value: header.value,\n                                                       }));\n    this.#headers.sort((a, b) => Platform.StringUtilities.compare(a.name, b.name));\n\n    if (data.toReveal?.section === NetworkForward.UIRequestLocation.UIHeaderSection.Request) {\n      this.#headers.filter(header => header.name === data.toReveal?.header?.toLowerCase()).forEach(header => {\n        header.highlight = true;\n      });\n    }\n\n    this.#render();\n  }\n\n  #render(): void {\n    if (!this.#request) {\n      return;\n    }\n\n    // Disabled until https://crbug.com/1079231 is fixed.\n    // clang-format off\n    render(html`\n      ${this.#maybeRenderProvisionalHeadersWarning()}\n      ${this.#headers.map(header => html`\n        <${HeaderSectionRow.litTagName} .data=${{\n          header: header,\n        } as HeaderSectionRowData}></${HeaderSectionRow.litTagName}>\n      `)}\n    `, this.#shadow, {host: this});\n    // clang-format on\n  }\n\n  #maybeRenderProvisionalHeadersWarning(): LitHtml.LitTemplate {\n    if (!this.#request || this.#request.requestHeadersText() !== undefined) {\n      return LitHtml.nothing;\n    }\n\n    let cautionText;\n    let cautionTitle = '';\n    if (this.#request.cachedInMemory() || this.#request.cached()) {\n      cautionText = i18nString(UIStrings.provisionalHeadersAreShownDisableCache);\n      cautionTitle = i18nString(UIStrings.onlyProvisionalHeadersAre);\n    } else {\n      cautionText = i18nString(UIStrings.provisionalHeadersAreShown);\n    }\n    // Disabled until https://crbug.com/1079231 is fixed.\n    // clang-format off\n    return html`\n      <div class=\"call-to-action\">\n        <div class=\"call-to-action-body\">\n          <div class=\"explanation\" title=${cautionTitle}>\n            <${IconButton.Icon.Icon.litTagName} class=\"inline-icon\" .data=${{\n                iconName: 'clear-warning_icon',\n                width: '12px',\n                height: '12px',\n              } as IconButton.Icon.IconData}>\n            </${IconButton.Icon.Icon.litTagName}>\n            ${cautionText} <x-link href=\"https://developer.chrome.com/docs/devtools/network/reference/#provisional-headers\" class=\"link\">${i18nString(UIStrings.learnMore)}</x-link>\n          </div>\n        </div>\n      </div>\n    `;\n    // clang-format on\n  }\n}\n\nComponentHelpers.CustomElements.defineComponent('devtools-request-header-section', RequestHeaderSection);\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'devtools-request-header-section': RequestHeaderSection;\n  }\n}\n"],
  "mappings": "AAIA;AACA;AAGA;AACA;AACA;AACA;AACA;AAEA;AAEA,MAAM,EAAC,QAAQ,SAAQ;AAEvB,MAAM,YAAY;AAAA,EAIhB,WAAW;AAAA,EAIX,wCAAwC;AAAA,EAIxC,2BACI;AAAA,EAIJ,4BAA4B;AAAA;AAG9B,MAAM,OAAO,KAAK,KAAK,kBAAkB,qDAAqD;AAC9F,MAAM,aAAa,KAAK,KAAK,mBAAmB,KAAK,QAAW;AAOzD,0CAAmC,YAAY;AAAA,SACpC,aAAa,QAAQ;AAAA,YAClB,KAAK,aAAa,EAAC,MAAM;AAAA;AAAA,aAEb;AAAA,EAE/B,oBAA0B;AACxB,iBAAa,qBAAqB,CAAC;AAAA;AAAA,MAGjC,KAAK,MAAgC;AACvC,oBAAgB,KAAK;AAErB,oBAAgB,cAAc,iBAAiB,IAAI,YAAW;AAAA,MACT,MAAM,SAAS,gBAAgB,kBAAkB,OAAO;AAAA,MACxD,OAAO,OAAO;AAAA;AAEnE,kBAAc,KAAK,CAAC,GAAG,MAAM,SAAS,gBAAgB,QAAQ,EAAE,MAAM,EAAE;AAExE,QAAI,KAAK,UAAU,YAAY,eAAe,kBAAkB,gBAAgB,SAAS;AACvF,oBAAc,OAAO,YAAU,OAAO,SAAS,KAAK,UAAU,QAAQ,eAAe,QAAQ,YAAU;AACrG,eAAO,YAAY;AAAA;AAAA;AAIvB;AAAA;AAAA,YAGc;AACd,QAAI,CAAC,eAAe;AAClB;AAAA;AAKF,WAAO;AAAA,QACH;AAAA,QACA,cAAc,IAAI,YAAU;AAAA,WACzB,iBAAiB,oBAAoB;AAAA,MACtC;AAAA,WAC6B,iBAAiB;AAAA;AAAA,OAEjD,cAAc,EAAC,MAAM;AAAA;AAAA,0CAImC;AAC3D,QAAI,CAAC,iBAAiB,cAAc,yBAAyB,QAAW;AACtE,aAAO,QAAQ;AAAA;AAGjB,QAAI;AACJ,QAAI,eAAe;AACnB,QAAI,cAAc,oBAAoB,cAAc,UAAU;AAC5D,oBAAc,WAAW,UAAU;AACnC,qBAAe,WAAW,UAAU;AAAA,WAC/B;AACL,oBAAc,WAAW,UAAU;AAAA;AAIrC,WAAO;AAAA;AAAA;AAAA,2CAGgC;AAAA,eAC5B,WAAW,KAAK,KAAK,wCAAwC;AAAA,MAC5D,UAAU;AAAA,MACV,OAAO;AAAA,MACP,QAAQ;AAAA;AAAA,gBAER,WAAW,KAAK,KAAK;AAAA,cACvB,6HAA6H,WAAW,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAShK,iBAAiB,eAAe,gBAAgB,mCAAmC;",
  "names": []
}
